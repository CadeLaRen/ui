(function(a){a.jqf={drawerClose:function(c){var d=a(c).prev(".jqf-drawer-handle");var b=a(".jqf-icon",d);a(c).slideUp(function(){a(d).removeClass("jqf-active").toggleClass("jqf-last",a(c).is(".jqf-last"));a(b).addClass("jqf-icon-right").removeClass("jqf-icon-down")})},drawerOpen:function(c){var d=a(c).prev(".jqf-drawer-handle");var b=a(".jqf-icon",d);a(d).addClass("jqf-active").removeClass("jqf-last");a(b).addClass("jqf-icon-down").removeClass("jqf-icon-right");a(c).slideDown()},drawersClose:function(b){a.each(b,function(c,d){a.jqf.drawerClose(d)})},drawersOpen:function(b){a.each(b,function(c,d){a.jqf.drawerOpen(d)})},folderToggle:function(b,d){var c=a(".jqf-folders-tabs",d);a(".jqf-folder-tab",c).each(function(e,f){if(e==b){a(f).addClass("jqf-active")}else{a(f).removeClass("jqf-active")}});a(".jqf-folder",d).each(function(e,f){if(e==b){a(f).show()}else{a(f).hide()}})},framePosition:function(b){var c=a.extend({frame:a(".jqf-window-frame"),overlay:a(window)},b);var i=parseInt(a(c.overlay).width()/2);if(a(window).height()<a(c.overlay).height()){var d=parseInt((a(window).height()-a(c.overlay).offset().top)/2)}else{var d=parseInt(a(c.overlay).height()/2+a(c.overlay).offset().top)}var h=parseInt(a(c.frame).innerWidth()/2);var g=parseInt(a(c.frame).innerHeight()/2);var f=i-h;f=(f>0)?f:0;var e=d-g;e=(e>0)?e:0;a(c.frame).css("left",f+"px");a(c.frame).css("top",e+"px")},waitStart:function(b){var d=a.extend({content:"Updating...",object:a(document.body),onStop:function(){},seconds:0},b);a(d.object).css("position","relative").append('<div class="jqf jqf-wait"><div class="jqf-wait-frame">'+d.content+'<div class="jqf-wait-reflection"></div></div></div>');var c=a(".jqf-wait",d.object);var e=a(".jqf-wait-frame",c);a(c).fadeIn(function(){a(c).css("filter","progid:DXImageTransform.Microsoft.Gradient(StartColorStr=#80ffffff, EndColorStr=#80ffffff)");a.jqf.framePosition({frame:e,overlay:c});a(e).fadeIn(function(){a(e).css("filter","progid:DXImageTransform.Microsoft.Gradient(StartColorStr=#c0000000, EndColorStr=#c0000000)");if(d.seconds>0){var f=d.seconds*1000;setTimeout(function(){a.jqf.waitStop({object:a(d.object),onStop:d.onStop})},f)}})})},waitStop:function(b){var d=a.extend({object:a(document.body),onStop:function(){}},b);var c=a(".jqf-wait",d.object);var e=a(".jqf-wait-frame",c);a(e).fadeOut(function(){a(c).fadeOut(function(){d.onStop.call();a(c).remove()})})},windowClose:function(b){var d=a.extend({onClose:function(){}},b);var c=a(".jqf-window");var e=a(".jqf-window-frame");a(e).fadeOut(function(){a(c).fadeOut(function(){d.onClose.call();a(e).remove();a(c).remove()})})},windowOpen:function(b){var d=a.extend({onClose:function(){},onOpen:function(){},title:"Untitled",url:""},b);a(document.body).append('<div class="jqf-window"></div><div class="jqf jqf-window-frame"><div class="jqf-window-handle"><span class="jqf-window-title">'+d.title+'</span><span class="jqf-icon jqf-icon-close jqf-window-close"></span></div><div class="jqf-window-content"></div><div class="jqf-window-reflection"></div></div>').keyup(function(h){if(h.keyCode==27){a.jqf.windowClose(d)}});var c=a(".jqf-window");a(window).resize(function(){a.jqf.framePosition({frame:a(g),overlay:a(c)})});var g=a(".jqf-window-frame");var f=a(".jqf-window-handle",g);a(g).click(function(h){h.stopPropagation()}).draggable({containment:a(c),cursor:"pointer",handle:a(f)});var e=a(".jqf-window-content",g);a(e).load(d.url,function(){a(".jqf-window-close",g).click(function(){a.jqf.windowClose(d)});a(c).css("filter","alpha(opacity = 75)").fadeIn(function(){a.jqf.framePosition({frame:a(g),overlay:a(c)});a(g).fadeIn(function(){d.onOpen.call(e)})})})},windowRetitle:function(b){var c=a.extend({onRetitle:function(){},title:"Untitled"},b);var d=a(".jqf-window-title");a(d).text(c.title,function(){c.onRetitle.call()})}};a.fn.jqfDrawers=function(b){var c=a.extend({},b);return this.each(function(e,d){a(d).children("div").each(function(f,g){a(g).addClass("jqf-drawer")});a(d).addClass("jqf jqf-drawers");a(".jqf-drawer:last",d).addClass("jqf-last");a(".jqf-drawer",d).each(function(f,g){a(g).before('<div class="jqf-drawer-handle"><span class="jqf-icon jqf-icon-right"></span> '+a(g).attr("title")+"</div>");var h=a(g).prev(".jqf-drawer-handle");a(h).toggleClass("jqf-last",a(g).is(".jqf-last"));a(g).hide();a(h).click(function(){if(a(h).hasClass("jqf-active")){a.jqf.drawerClose(g)}else{a.jqf.drawerOpen(g)}})});a(".jqf-drawer-handle:first-child",d).addClass("jqf-first")})};a.fn.jqfFilmstrip=function(b){var c=a.extend({frameHeight:100,frameWidth:100,show:3},b);return this.each(function(j,h){var f=c.frameHeight+22;var l=c.frameWidth+17;a(h).addClass("jqf-filmstrip");var d=a(h).find("> span");a(d).wrapAll('<span class="jqf-view"><span class="jqf-reel"/></span>').each(function(n,o){a(o).addClass("jqf-frame").css({height:c.frameHeight,width:c.frameWidth})});var m=a(h).find("> .jqf-view");a(m).css("height",f+"px").css("width",l*c.show+5+"px");var g=a(m).find("> .jqf-reel");var e=Math.ceil(a(d).length/c.show);var k=1;a(m).before('<button class="jqf-button back"><span class="jqf-icon jqf-icon-left"></span></button>').after('<button class="jqf-button forward"><span class="jqf-icon jqf-icon-right"></span></button>');a("button.back",this).click(function(){if(k==1){a(g).animate({left:"-="+(l*c.show*(e-1))});k=e}else{a(g).animate({left:"+="+(l*c.show)});--k}});a("button.forward",this).click(function(){if(k==e){a(g).animate({left:0});k=1}else{a(g).animate({left:"-="+(l*c.show)});++k}})})};a.fn.jqfFolders=function(b){var c=a.extend({direction:"horizontal"},b);return this.each(function(f,e){a(e).children("div").each(function(g,h){a(h).addClass("jqf-folder")});a(e).addClass("jqf jqf-folders-"+c.direction).prepend('<div class="jqf-folders-tabs"></div>');var d=a(".jqf-folders-tabs",e);a(".jqf-folder",e).each(function(g,h){a(d).append('<span class="jqf-folder-tab">'+a(h).attr("title")+"</span>")});a(".jqf-folder-tab:first-child",d).addClass("jqf-first");a(".jqf-folder-tab:last-child",d).addClass("jqf-last");a(".jqf-folder-tab",d).each(function(g,h){a(h).click(function(){a.jqf.folderToggle(g,e)})});a.jqf.folderToggle(0,e)})};a.fn.jqfMenu=function(b){var c=a.extend({icon:""},b);return this.each(function(g,e){a(e).hide();var j="";if(c.icon!=""){j='<span class="jqf-icon jqf-icon-'+c.icon+'"></span> '}var h=a("option",e);a(e).after('<div class="jqf jqf-menu"><div class="jqf-menu-button">'+j+a(e).attr("title")+' <span class="jqf-icon jqf-icon-down"></span></div><div class="jqf-menu-choices"></div></div>');var k=a(e).next(".jqf-menu");var f=a(".jqf-menu-button",k);var l=a(".jqf-menu-choices",k);var d=function(){a(l).slideUp();a(f).removeClass("jqf-active")};a("option",e).each(function(m,n){a(l).append('<div class="jqf-menu-choice" id="'+a(n).attr("value")+'">'+a(n).text()+"</div>")});a.each(a(".jqf-menu-choice",l),function(n,m){a(m).click(function(){d()})});a(f).click(function(){a(l).slideToggle();a(f).toggleClass("jqf-active");a(document).keyup(function(i){if(i.keyCode==27){d()}});a(l).mouseleave(function(){d()})})})};a.fn.jqfRating=function(b){var c=a.extend({group:0,single:0,onClick:function(){}},b);return this.each(function(g,l){a(l).hide();var j=a("input:radio",l);var k=a(l).attr("title");var f="";if(k!=""){f='<div class="jqf-rating-label">'+k+"</div>"}a(l).after('<div class="jqf jqf-rating">'+f+'<div class="jqf-rating-stars"></div></div>');var h=a(l).next(".jqf-rating");var e=a(".jqf-rating-stars",h);a(j).each(function(n,m){var o="";if(c.single>n){o=" jqf-rating-single"}else{if(c.group>n){o=" jqf-rating-group"}}a(e).append('<span class="jqf-rating-star'+o+'" title ="'+a(m).attr("title")+'"></span>')});var d=function(i,m){a(".jqf-rating-star",e).each(function(n,o){a(o).removeClass("jqf-rating-single").removeClass("jqf-rating-group");if(i>n){a(o).addClass("jqf-rating-"+m)}})};a(".jqf-rating-star",e).each(function(m,n){a(n).hover(function(){d(m+1,"single")},function(){if(c.single>0){d(c.single,"single")}else{if(c.group>0){d(c.group,"group")}else{d(0)}}});a(n).click(function(){var i=a(j)[m];a(i).attr("checked","checked");c.single=m+1;d(c.single,"single");c.onClick.call(a(i))})})})};a.fn.jqfSlider=function(b){var c=a.extend({onDrag:function(){},onStop:function(){},unit:20},b);return this.each(function(j,o){a(o).hide();var n=a("option",o);var f=n.length*c.unit;var l=a(":selected",o).index();var h=a(n)[l];var m=a(h).text();a(o).after('<div class="jqf jqf-slider" id="jqf-slider-'+a(o).attr("id")+'"><div class="jqf-slider-label">'+a(o).attr("title")+'</div><span class="jqf-slider-bevel"><div class="jqf-slider-track"><div class="jqf-slider-level"></div><div class="jqf-slider-button"></div></div><div class="jqf-slider-text jqf-ellipsis" title="'+m+'">'+m+"</div></span></div>");var e=a(o).next(".jqf-slider");var q=a(".jqf-slider-bevel",e);var g=a(".jqf-slider-track",e);var d=a(".jqf-slider-level",e);var k=a(".jqf-slider-button",e);var p=a(".jqf-slider-text",e);a(g).css("width",f+"px");a(p).css("width",f+"px");a(d).css("width",l*c.unit+c.unit+"px");a(k).css("left",l*c.unit+"px").css("width",c.unit);a(k).draggable({addClasses:false,axis:"x",containment:q,drag:function(){l=Math.round(a(k).position().left/c.unit);a(d).css("width",l*c.unit+c.unit+"px");h=a(n)[l];m=a(h).text();a(".jqf-slider-text",q).remove();a(q).append('<div class="jqf-slider-text jqf-ellipsis" title="'+m+'">'+m+"</div>");a(".jqf-slider-text",q).css("width",f+"px");c.onDrag.call(a(h))},distance:c.unit,grid:[c.unit,0],scroll:false,stop:function(){a(o).val(a(h).attr("value"));c.onStop.call(a(h))}})})};a.fn.jqfWindow=function(b){var c=a.extend({},b);return this.each(function(d,e){a(e).click(function(f){f.preventDefault();if(a(e).is("a")&&!a(e).attr("name")){c.url=a(e).attr("href")}else{c.url=a(e).attr("name")}c.title=a(e).attr("title");a.jqf.windowOpen(c)})})}})(jQuery);